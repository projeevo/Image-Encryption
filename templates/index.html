<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Image Encryption - 2D Logistic Map</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <div class="logo-text">
                    <h1>ImageCrypt</h1>
                    <p>Advanced 2D Logistic Map Encryption</p>
                </div>
            </div>
            <nav class="nav">
                <a href="#home" class="nav-link active" data-tab="home">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
                <a href="#encrypt" class="nav-link" data-tab="encrypt">
                    <i class="fas fa-lock"></i>
                    <span>Encrypt</span>
                </a>
                <a href="#decrypt" class="nav-link" data-tab="decrypt">
                    <i class="fas fa-unlock"></i>
                    <span>Decrypt</span>
                </a>
                <a href="#how-it-works" class="nav-link" data-tab="how-it-works">
                    <i class="fas fa-info-circle"></i>
                    <span>How It Works</span>
                </a>
            </nav>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Home Tab -->
            <div id="home" class="tab-content active">
                <div class="hero-section enhanced-hero">
                    <div class="hero-content">
                        <h1 class="main-headline">Medical Image Encryption<br><span class="gradient-text">with Zig-Zag & Chaotic Maps</span></h1>
                        <p class="hero-desc">Protect patient privacy with advanced, multi-layered encryption. Our system combines Zig-Zag scanning and 2D Logistic Map chaos for robust, modern securityâ€”perfect for healthcare and research.</p>
                        <div class="hero-features">
                            <div class="feature"><i class="fas fa-shield-alt"></i> Multi-Layer Security</div>
                            <div class="feature"><i class="fas fa-random"></i> Chaotic Permutation</div>
                            <div class="feature"><i class="fas fa-user-md"></i> Patient-Centric</div>
                            <div class="feature"><i class="fas fa-file-archive"></i> Easy ZIP Packaging</div>
                        </div>
                        <div class="hero-buttons">
                            <button class="btn btn-primary" onclick="switchTab('#encrypt')">
                                <i class="fas fa-lock"></i> Encrypt Now
                            </button>
                            <button class="btn btn-secondary" onclick="switchTab('#how-it-works')">
                                <i class="fas fa-info-circle"></i> How It Works
                            </button>
                        </div>
                    </div>
                    <div class="hero-visual">
                        <div class="encryption-demo">
                            <div class="demo-image original">
                                <i class="fas fa-image"></i>
                                <span>Original</span>
                            </div>
                            <div class="demo-arrow">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                            <div class="demo-image encrypted">
                                <i class="fas fa-lock"></i>
                                <span>Encrypted</span>
                            </div>
                        </div>
                        <div class="hero-visual-bg"></div>
                    </div>
                </div>
            </div>

            <!-- Encrypt Tab -->
            <div id="encrypt" class="tab-content">
                <div class="tab-header">
                    <h2><i class="fas fa-lock"></i> Image Encryption</h2>
                    <p>Upload an image to encrypt it using our advanced 2D Logistic Map algorithm</p>
                </div>

                <div class="encryption-container">
                    <div class="upload-section">
                        <input type="text" id="patient-name" class="patient-name-input" placeholder="Enter patient name" required style="margin-bottom: 1rem; width: 100%; max-width: 500px; padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border); font-size: 1rem;">
                        <div class="upload-area" id="upload-area">
                            <div class="upload-content">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <h3>Upload Your Image</h3>
                                <p>Drag and drop your image here or click to browse</p>
                                <span class="file-types">Supports: JPG, PNG, GIF, BMP</span>
                            </div>
                            <input type="file" id="image-input" accept="image/*" hidden>
                        </div>
                        <button class="btn btn-primary" id="encrypt-btn" disabled>
                            <i class="fas fa-lock"></i>
                            Encrypt Image
                        </button>
                        <!-- Webcam Capture Button -->
                        <button class="btn btn-secondary" id="webcam-btn" style="margin-top: 1rem;">
                            <i class="fas fa-camera"></i>
                            Capture from Webcam
                        </button>
                        <!-- Webcam Video Stream -->
                        <div id="webcam-container" style="display:none; margin-top:1rem; text-align:center;">
                            <video id="webcam-video" width="320" height="240" autoplay playsinline style="border-radius: 12px; background: var(--surface-light);"></video>
                            <br>
                            <button class="btn btn-primary" id="capture-btn" style="margin-top:0.5rem;">
                                <i class="fas fa-camera-retro"></i> Take Snapshot
                            </button>
                            <button class="btn btn-secondary" id="close-webcam-btn" style="margin-top:0.5rem; margin-left:0.5rem;">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                            <canvas id="webcam-canvas" width="320" height="240" style="display:none;"></canvas>
                        </div>
                    </div>

                    <div class="results-section">
                        <div class="image-comparison">
                            <div class="image-card">
                                <h3>Original Image</h3>
                                <div class="image-container">
                                    <img id="original-image" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMmEzMzUwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iI2I5YjliOSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIGltYWdlIHNlbGVjdGVkPC90ZXh0Pjwvc3ZnPg==" alt="Original image">
                                </div>
                            </div>
                            <div class="image-card">
                                <h3>Encrypted Image</h3>
                                <div class="image-container">
                                    <img id="encrypted-image" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMmEzMzUwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iI2I5YjliOSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkVuY3J5cHRlZCBpbWFnZSB3aWxsIGFwcGVhciBoZXJlPC90ZXh0Pjwvc3ZnPg==" alt="Encrypted image">
                                </div>
                            </div>
                        </div>
                        
                        <div class="download-section" id="download-section" style="display: none;">
                            <div class="download-card">
                                <h3><i class="fas fa-download"></i> Download Encrypted Package</h3>
                                <p>Your encrypted image and decryption keys are packaged in a secure ZIP file.</p>
                                <button class="btn btn-success" id="download-btn">
                                    <i class="fas fa-file-archive"></i>
                                    Download ZIP File
                                </button>
                                <div class="security-info">
                                    <i class="fas fa-info-circle"></i>
                                    <span>Keep this file safe - you'll need it to decrypt your image later.</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="instructions-section">
                    <h3><i class="fas fa-graduation-cap"></i> How to Use Encryption</h3>
                    <div class="instructions-grid">
                        <div class="instruction-step">
                            <div class="step-number">1</div>
                            <h4>Upload Image</h4>
                            <p>Select any image file (JPG, PNG, GIF, BMP) from your device</p>
                        </div>
                        <div class="instruction-step">
                            <div class="step-number">2</div>
                            <h4>Encrypt</h4>
                            <p>Click the "Encrypt Image" button to apply 2D Logistic Map encryption</p>
                        </div>
                        <div class="instruction-step">
                            <div class="step-number">3</div>
                            <h4>Download</h4>
                            <p>Download the ZIP file containing your encrypted image and decryption keys</p>
                        </div>
                        <div class="instruction-step">
                            <div class="step-number">4</div>
                            <h4>Share Securely</h4>
                            <p>Share the ZIP file with intended recipients for decryption</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Decrypt Tab -->
            <div id="decrypt" class="tab-content">
                <div class="tab-header">
                    <h2><i class="fas fa-unlock"></i> Image Decryption</h2>
                    <p>Upload the encrypted ZIP file to restore your original image</p>
                </div>

                <div class="decryption-container">
                    <div class="upload-section">
                        <div class="upload-area" id="decrypt-upload-area">
                            <div class="upload-content">
                                <i class="fas fa-file-archive"></i>
                                <h3>Upload Encrypted Package</h3>
                                <p>Drag and drop the ZIP file here or click to browse</p>
                                <span class="file-types">File must be: encrypted_package.zip</span>
                            </div>
                            <input type="file" id="zip-input" accept=".zip" hidden>
                        </div>
                        <button class="btn btn-primary" id="decrypt-btn" disabled>
                            <i class="fas fa-unlock"></i>
                            Decrypt Image
                        </button>
                    </div>

                    <div class="results-section">
                        <div class="image-comparison">
                            <div class="image-card">
                                <h3>Encrypted Image</h3>
                                <div class="image-container">
                                    <img id="decrypt-encrypted-image" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMmEzMzUwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iI2I5YjliOSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkVuY3J5cHRlZCBpbWFnZSB3aWxsIGFwcGVhciBoZXJlPC90ZXh0Pjwvc3ZnPg==" alt="Encrypted image">
                                </div>
                            </div>
                            <div class="image-card">
                                <h3>Decrypted Image</h3>
                                <div class="image-container">
                                    <img id="decrypted-image" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMmEzMzUwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iI2I5YjliOSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkRlY3J5cHRlZCBpbWFnZSB3aWxsIGFwcGVhciBoZXJlPC90ZXh0Pjwvc3ZnPg==" alt="Decrypted image">
                                </div>
                            </div>
                        </div>
                        
                        <div class="download-section" id="decrypt-download-section" style="display: none;">
                            <div class="download-card">
                                <h3><i class="fas fa-download"></i> Download Decrypted Image</h3>
                                <p>Your original image has been successfully restored.</p>
                                <button class="btn btn-success" id="decrypt-download-btn">
                                    <i class="fas fa-image"></i>
                                    Download Image
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="instructions-section">
                    <h3><i class="fas fa-graduation-cap"></i> How to Use Decryption</h3>
                    <div class="instructions-grid">
                        <div class="instruction-step">
                            <div class="step-number">1</div>
                            <h4>Upload ZIP File</h4>
                            <p>Select the encrypted_package.zip file you received</p>
                        </div>
                        <div class="instruction-step">
                            <div class="step-number">2</div>
                            <h4>Decrypt</h4>
                            <p>Click "Decrypt Image" to restore your original image</p>
                        </div>
                        <div class="instruction-step">
                            <div class="step-number">3</div>
                            <h4>Download</h4>
                            <p>Download your restored original image</p>
                        </div>
                        <div class="instruction-step">
                            <div class="step-number">4</div>
                            <h4>Verify</h4>
                            <p>Compare with the original to ensure perfect restoration</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- How It Works Tab -->
            <div id="how-it-works" class="tab-content">
                <div class="tab-header">
                    <h2><i class="fas fa-info-circle"></i> How It Works</h2>
                    <p>Multi-layered image encryption for healthcare and privacy</p>
                </div>
                <div class="how-it-works-content">
                    <div class="algorithm-section">
                        <h3>Encryption Process Overview</h3>
                        <ol class="how-steps">
                            <li>
                                <strong> Zig-Zag Scanning</strong><br>
                                <span class="how-desc">The image is first rearranged using a zig-zag scan, scrambling pixel positions in a non-linear, hard-to-predict pattern.</span>
                            </li>
                            <li>
                                <strong> 2D Logistic Map Permutation</strong><br>
                                <span class="how-desc">A chaotic 2D Logistic Map generates pseudo-random sequences to further permute and diffuse pixel values, making the image appear as random noise.</span>
                            </li>
                            <li>
                                <strong> XOR Diffusion</strong><br>
                                <span class="how-desc">A mask derived from the chaotic map is XORed with the permuted pixels, adding another layer of security.</span>
                            </li>
                            <li>
                                <strong> Secure Packaging</strong><br>
                                <span class="how-desc">The encrypted image and decryption keys are packaged in a ZIP file, named for the patient for easy identification.</span>
                            </li>
                        </ol>
                        <div class="algorithm-visuals">
                            <div class="algo-step"><i class="fas fa-wave-square"></i><span> Zig-Zag</span></div>
                            
                            <div class="algo-step"><i class="fas fa-random"></i><span> 2D Logistic Map</span></div>
                            
                            <div class="algo-step"><i class="fas fa-key"></i><span> XOR Mask</span></div>
                            
                            <div class="algo-step"><i class="fas fa-file-archive"></i><span> ZIP Output</span></div>
                        </div>
                    </div>
                    <div class="security-features">
                        <h3>Why This Approach?</h3>
                        <div class="features-grid">
                            <div class="feature-card">
                                <i class="fas fa-shield-alt"></i>
                                <h4>Multi-Layer Security</h4>
                                <p>Zig-zag and chaos together make reverse engineering extremely difficult.</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-user-lock"></i>
                                <h4>Patient Privacy</h4>
                                <p>Each file is named for the patient, making management and retrieval easy.</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-random"></i>
                                <h4>Chaotic Randomness</h4>
                                <p>2D Logistic Map ensures high entropy and unpredictability.</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-file-archive"></i>
                                <h4>Easy Integration</h4>
                                <p>Encrypted images and keys are zipped for simple sharing and storage.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Status Messages -->
        <div id="status-message" class="status-message" style="display: none;">
            <div class="status-content">
                <i class="status-icon"></i>
                <span class="status-text"></span>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay" style="display: none;">
            <div class="loading-content">
                <div class="spinner"></div>
                <p>Processing your image...</p>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>